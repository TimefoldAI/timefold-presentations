<!doctype html>
<!--suppress HtmlRequiredAltAttribute -->
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <title>JChampions Conference</title>
    <meta name="description"
          content="This slide deck talks about how we can Optimize Santa's travels using Timefold Solver">
    <link href="https://github.com/TimefoldAI/timefold-presentations" rel="canonical">

    <link rel="stylesheet" href="../src/web/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../src/web/reveal/css/reveal.css">
    <link rel="stylesheet" href="../src/web/reveal/css/theme/simple.css" id="theme">
    <script>
        if (window.location.search.match(/print-pdf/gi)) {
            document.write('<link rel="stylesheet" href="../src/web/reveal/css/print/pdf.css">');
        }
    </script>
    <style>
        .endingcard {
            text-align: center;
            padding: 20px;
            background: linear-gradient(to right, rgba(255, 77, 77, 0.95), rgba(0, 107, 60, 0.95)), url("../src/content/static/santa/route-genai-chatgpt.webp");
            background-size: cover;
            color: white;
            border-radius: 10px;
            max-width: 800px;
            margin: 20px auto;
        }

        .highlight {
            color: #4900f8;
        }

        .highlight-light {
            color: white;
        }

        .floating-banner {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #c41e3a 0%, #165b33 100%);
            color: #fffafa;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 0.8em;
            border: 2px solid #ffd700;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            z-index: 10;
        }

        .subtitle {
            font-size: 0.8em;
            opacity: 0.8;
        }

        .gift-row {
            font-size: 3rem;
            margin: 0.5em 0 1em;
        }

        .new-gift-package {
            filter: drop-shadow(0px 0px 10px red) contrast(160%) hue-rotate(180deg)
        }

        .impacted-gift-package {
            filter: drop-shadow(0px 0px 10px green) contrast(100%) hue-rotate(100deg)
        }

        .reveal .highlight-current-line.visible {
            background: rgba(255, 215, 0, 0.15);
            border-left: 4px solid gold;
            padding-left: 0.5em;
        }


    </style>
    <link rel="stylesheet" href="../src/web/reveal/plugin/highlight/a11y-light.css">
    <link rel="stylesheet" href="../src/web/timefold-presentation.css">

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>

<body>
<div class="reveal">
    <div class="watermark watermark-left">
        <a href="https://bsky.app/profile/tomcools.be" target="_blank">
            <img src="../src/web/social/bluesky-logo.svg" alt="Bluesky"/>
            <span>@tomcools.be</span>
        </a>
        <div class="watermark-divider"></div>
        <a href="https://timefold.ai" target="_blank">
            <img src="../src/web/social/timefold-logomark.svg" height="28px" alt="Timefold"/>
            <span>timefold.ai</span>
        </a>
    </div>
    <div class="slides">
        <section>
            <h2>
                Optimizing Santa's Travels üéÑ
            </h2>
            <div style="margin-top: 80px;">
                <p>
                    <span style="font-size: smaller">by</span> Tom Cools<br/>
                </p>
            </div>
        </section>
        <section>
            <section>Holidays are behind us...</section>
            <section>...but Santa is already planning for 2026</section>
            <section>
                <christmas-countdown></christmas-countdown>
            </section>
            <section data-background-image="../src/content/static/santa/production-line-genai-gemini.png"
                     data-background-size="cover">
                <div class="floating-banner">
                    Toys need to be created
                </div>
            </section>
            <section data-background-image="../src/content/static/santa/schedule-genai-gemini.png"
                     data-background-size="cover">
                <div class="floating-banner">
                    Workers need to be assigned shifts
                </div>
            </section>
            <section data-background-image="../src/content/static/santa/route-genai-gemini.png"
                     data-background-size="cover">
                <div class="floating-banner">
                    Santa needs to figure out the route to all children
                </div>
            </section>
            <section data-background-image="../src/content/static/santa/route-genai-gemini.png"
                     data-background-size="cover"
                     data-background-opacity="0.15"
                     data-background-color="white">
                <h2>These are all <br/> <span class="highlight">planning problems</span></h2>
                <aside class="notes">PROMISE by the end of this session, you'll get a better grasp</aside>

                <div style="margin-top: 30px; font-size: 1.2em; line-height: 2;">
                    <p class="fragment fade-up">üéØ <span class="highlight">Optimize goals</span></p>
                    <p class="fragment fade-up">üì¶ with <span class="highlight">limited resources</span></p>
                    <p class="fragment fade-up">‚öñÔ∏è under <span class="highlight">constraints</span></p>
                </div>
            </section>
            <section data-background-image="../src/content/static/santa/route-genai-gemini.png"
                     data-background-size="cover">
                <div class="floating-banner">
                    Our focus for today: Optimized Route
                    <div style="margin-top: 30px; font-size: 0.8em; line-height: 2;">
                        <p class="fragment fade-up">üéØ <span class="highlight-light">Goal: Minimize travel time!</span></p>
                        <p class="fragment fade-up">üì¶ <span class="highlight-light">Resources: 1 (magical) sleigh!</span></p>
                        <p class="fragment fade-up">‚öñÔ∏è <span class="highlight-light">Constraints: Santa things!</span></p>
                    </div>
                </div>
            </section>
        </section>

        <section>
            <section data-background-color="#3e00ff">
                <h2>Tackling the problem</h2>
                <h4>In our favorite programming language!</h4>
                <aside class="notes">
                    Show demo of what would happen if you just take the in the order you received the letters.
                </aside>
            </section>
            <section>
                <img src="../src/content/static/santa/vehicleRoutingClassDiagram-simplified_0.png" class="fullImage">
                <img src="../src/content/static/santa/vehicleRoutingClassDiagram-simplified_1.png"
                     class="fullImage fragment">
            </section>
            <section>
                <h2>Greedy Algorithms</h2>
            </section>
            <section>
                <h3><span class="highlight">Greedy algorithms</span> make <span class="highlight">locally optimal choices</span>
                    at each step, but do not consider effects on follow up steps.</h3>
            </section>
            <section>
                <greedy-tree-canvas algorithm="greedy"></greedy-tree-canvas>
            </section>
            <section>
                <h3>Greedy code</h3>
                <pre>
                    <code class="hljs language-java" data-line-numbers="8-14">var remaining = new ArrayList<>(allVisits); //copy
var visitOrder = new ArrayList<>();

Visit latest = remaining.getFirst();
visitOrder.add(latest);
remaining.remove(latest);

int remainingSize = remaining.size();
for (int i = 0; i < remainingSize-1; i++) {
    Visit closestVisit = findClosest(latest, remaining);
    visitOrder.add(closestVisit);
    remaining.remove(closestVisit);
    latest = closestVisit;
}
                    </code>
                </pre>
            </section>
            <section>
                Greed != Good
            </section>
            <section>
                <greedy-tree-canvas algorithm="greedy"></greedy-tree-canvas>
            </section>
            <section>
                <aside class="notes">
                    <h3>Santa is somewhat disappointed, he expected an <b>optimized</b> solution, not just a
                        <b>Feasible</b> solution</h3>

                    Mention "THE" optimal solution is a tricky question.
                </aside>
                <h3>Algorithm comparison</h3>
                <table style="margin-top: 100px; table-layout:fixed">
                    <thead>
                    <tr>
                        <th>Greedy</th>
                        <th></th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td class="fragment"><span class="positive">Fast</span></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td class="fragment"><span class="positive">Scalable</span></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td class="fragment"><span class="negative">Far from optimal</span></td>
                        <td></td>
                        <td></td>
                    </tr>
                    </tbody>
                </table>
            </section>
            <section>
                <h2>Let's try everything! <br/><span class="highlight">Brute Force</span> üí™ </h2>
            </section>
            <section>
                <greedy-tree-canvas algorithm="brute"></greedy-tree-canvas>
                <aside class="notes">
                    Shall we wait for the system to finish?
                </aside>
            </section>
            <section>
                <h3>How big is the search space?</h3>
                <p class="fragment">Search space for <i>n</i> üéÅ: <i>n!</i></p>
                <p class="fragment">Search space for 5 üéÅ: <span class="fragment">120</span></p>
                <p class="fragment">Search space for 10 üéÅ: <span class="fragment">3628800</span></p>
                <p class="fragment">Search space for 100 üéÅ: <span class="fragment">10<sup>157</sup></span></p>
                <p class="fragment">Search space for 1000 üéÅ: <span class="fragment">10<sup>2567</sup></span></p>
            </section>
            <section data-background-image="../src/content/static/llms-cant/pexels-sky-space-dark-galaxy.jpg"
                     data-background-size="stretch"
                     data-background-opacity="0.35"
                     data-background-color="black">
                <p class="fragment">Search space for 1000 üéÅ: 10<sup>2567</sup></p>
                <p class="fragment">Atoms in the observable universe: <span class="fragment">10<sup>80</sup></span></p>
                <p class="fragment">10^2567: <span class="fragment highlight-b">2487 more zeroes</span></p>
            </section>
            <section>
                <greedy-tree-canvas algorithm="brute"></greedy-tree-canvas>
            </section>
            <section>
                <div>
                    <christmas-countdown></christmas-countdown>
                </div>
                <div class="fragment">üò±</div>
            </section>
            <section>
                <h3>Algorithm comparison</h3>
                <table style="margin-top: 100px; table-layout:fixed">
                    <thead>
                    <tr>
                        <th>Greedy</th>
                        <th>Brute Force</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td><span class="positive">Fast</span></td>
                        <td class="fragment"><span class="negative">Slow</span></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><span class="positive">Scalable</span></td>
                        <td class="fragment"><span class="negative">Not scalable</span></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><span class="negative">Far from optimal</span></td>
                        <td class="fragment"><span class="positive">Optimal</span></td>
                        <td></td>
                    </tr>
                    </tbody>
                </table>
            </section>
        </section>
        <section>
        <section>
            <h3>How good are humans?</h3>
        </section>
        <section>
            <greedy-tree-canvas algorithm="brute"></greedy-tree-canvas>
        </section>
            <section>
                <h3>Result comparison</h3>
                <table style="margin-top: 100px; table-layout:fixed">
                    <thead>
                    <tr>
                        <th>Humans</th>
                        <th>Greedy</th>
                        <th>Brute Force</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td class="fragment"><span class="negative">Slow</span></td>
                        <td><span class="positive">Fast</span></td>
                        <td><span class="negative">Slow</span></td>
                    </tr>
                    <tr>
                        <td class="fragment"><span class="positive">?</span></td>
                        <td><span class="positive">Scalable</span></td>
                        <td><span class="negative">Not scalable</span></td>
                    </tr>
                    <tr>
                        <td class="fragment"><span class="negative">Far from optimal</span></td>
                        <td><span class="negative">Far from optimal</span></td>
                        <td><span class="positive">Optimal</span></td>
                    </tr>
                    </tbody>
                </table>
            </section>
        </section>

        <section>
            <section data-background-color="#3e00ff">
                <h2>Christmas Magic</h2>
                or math.. probably math.
            </section>
            <section data-background-image="../src/content/static/llms-cant/scared-pexels.png"
                     data-background-size="stretch"
                     data-background-opacity="0.1"
                     data-background-color="black">
                <h2>Mathematical Optimization</h2>
                <blockquote>Group of techniques to find the ideal inputs from a set <br/>in order to maximize or minimize a real function.</blockquote>
            </section>
            <section data-background-image="../src/content/static/llms-cant/scared-pexels.png"
                     data-background-size="stretch"><div class="fragment" style="color: #000000; float: right; margin-top: -300px; font-size: smaller">
                $\begin{aligned}

                & \quad \sum_{s \in S} \sum_{e \in E} \mathrm{pref}(s,e) \, a_{s,e} \\
                \end{aligned}
                $
            </div></section>
            <section data-transition="fade-out">
                <figure>
                    <img src="../src/content/static/company/solver-logo.png"/>
                    <p><i>Planning optimization made easy</i></p>
                </figure>
                <br/>
                <ul style="margin-top: 5px;">
                    <li class="fragment">Optimization problems in domain code</li>
                    <li class="fragment">Open Source (Apache license)</li>
                    <li class="fragment">JVM based!</li>
                </ul>
            </section>
            <section>
                <img src="../src/content/static/santa/vehicleRoutingClassDiagram-simplified_0.png" class="fullImage">
                <img src="../src/content/static/santa/vehicleRoutingClassDiagram-simplified_1.png"
                     class="fullImage fragment">
                <img src="../src/content/static/santa/vehicleRoutingClassDiagram-simplified_2.png"
                     class="fullImage fragment">
            </section>
            <section>
                <h3>Easy score calculator</h3>
                <pre xml:space="preserve"><code class="java">public HardSoftLongScore calculateScore(VehicleRoutePlan plan) {
    long totalDrivingTime = 0;

    for(Vehicle v : plan.getVehicles()) {
        totalDrivingTime += v.getTotalDrivingTimeSeconds();
    }

    return HardSoftLongScore.of(0, totalDrivingTime*-1);
}</code></pre>
            </section>
            <section>Demo Time</section>
            <section>
                <h3>Metaheuristics</h3>
                <ol>
                    <li class="fragment">Make a fast initial solution</li>
                    <li class="fragment">Exploring alternatives by moving things around</li>
                </ol>
            </section>
            <section>
                <h3>How many solutions per second?</h3>
                <div class="fragment">
                    <p>Check the Timefold log:</p>
                    <pre xml:space="preserve"><span class="codeLabel">log</span><code>08:27:00.867  INFO Solving started: ...
08:27:02.528  INFO Construction Heuristic ended: ...
                       move evaluation speed (39580/sec) ...
08:27:21.313  INFO Local Search ended: ...
                       move evaluation speed (101701/sec) ...
08:27:21.317  INFO Solving ended: ...
                       move evaluation speed (101461/sec) ...
</code></pre>
                </div>
                <p class="fragment">It looks at 100 000 solutions per second</p>
            </section>
            <section>
                <h3>Algorithm comparison</h3>
                <table style="margin-top: 100px; table-layout:fixed">
                    <thead>
                    <tr>
                        <th>Greedy</th>
                        <th>Brute Force</th>
                        <th>Metaheuristics</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td><span class="positive">Fast</span></td>
                        <td><span class="negative">Slow</span></td>
                        <td class="fragment"><span class="positive">Fast</span></td>
                    </tr>
                    <tr>
                        <td><span class="positive">Scalable</span></td>
                        <td><span class="negative">Not scalable</span></td>
                        <td class="fragment"><span class="positive">Scalable</span></td>
                    </tr>
                    <tr>
                        <td><span class="negative">Far from optimal</span></td>
                        <td><span class="positive">Optimal</span></td>
                        <td class="fragment"><span class="positive">(Near) Optimal</span></td>
                    </tr>
                    </tbody>
                </table>
            </section>

        </section>
        <section>
            <section>We still have a challenge! üî•</section>
            <section>
                "Minimize travel time" is a very simplistic view.
                <aside class="notes">
                    - Gets harder to unravel.
                    - Also heavy on the score calculation itself
                </aside>
            </section>
            <section>
                <h3>In reality</h3>
                <ul>
                    <li class="fragment">Drivers can only visit locations when they are open</li>
                    <li class="fragment">Trucks have limited capacity</li>
                    <li class="fragment">Multiple trucks scheduled at the same time</li>
                    <li class="fragment">...</li>
                </ul>
                <aside class="notes">
                    - Gets harder to unravel.
                    - Also heavy on the score calculation itself
                </aside>
            </section>
            <section data-background-color="#3e00ff">
                <h2>Constraints</h2>
            </section>
            <section>
                <h3>How do you define constraints?</h3>
                <pre><code class="hljs language-java" data-line-numbers="1-9|2-3|4-5|6|1-9">
Constraint minimizeTravelTime(ConstraintFactory factory) {
    return factory.forEach(Vehicle.class)
            .penalizeLong(HardSoftLongScore.ONE_SOFT,
                    Vehicle::getTotalDrivingTimeSeconds)
            .asConstraint("Minimize Travel Time");
}
                </code></pre>
            </section>
            <section>
                <h3>More elaborate example</h3>
                <pre>
                <code class="hljs language-java" data-line-numbers="1-9|2-3|4|5|6|7-8|1-9">
Constraint vehicleCapacity(ConstraintFactory factory) {
    return factory.forEach(Visit.class)
        .filter(visit -> visit.getVehicle() != null)
        .groupBy(Visit::getVehicle, sum(Visit::giftAmount))
        .filter((v, sum) -> sum > vehicle.getCapacity())
        .penalizeLong(HardSoftLongScore.ONE_HARD,
                (v, sum) -> sum - vehicle.getCapacity())
        .asConstraint("Vehicle Capacity");
}
                </code>
                </pre>
            </section>
            <section>
                <h3>Why use constraints?</h3>
                <ul>
                    <li class="fragment">Read like business rules</li>
                    <li class="fragment">Explainable Score</li>
                    <li class="fragment">Incremental Score Calculation</li>
                </ul>
            </section>
            <section>
                <h3>Incremental Score Calculation</h3>
                <p class="subtitle">
                    Adding one new package <span class="new-gift-package">üéÅ</span>
                </p>

                <div class="fragment">
                    <strong>Before</strong>
                    <div class="gift-row">
                        üéÅ üéÅ üéÅ üéÅ üéÅ üéÅ üéÅ üéÅ
                    </div>
                </div>

                <div class="fragment">
                    <strong>After</strong>
                    <div class="gift-row">
                        üéÅ üéÅ üéÅ üéÅ üéÅ
                        <span class="new-gift-package">üéÅ</span>
                        <span class="impacted-gift-package">üéÅ</span>
                        <span class="impacted-gift-package">üéÅ</span>
                        <span class="impacted-gift-package">üéÅ</span>
                    </div>
                </div>

                <div class="fragment highlight-current">
                    <p>
                        Only the <span class="impacted-gift-package">impacted üéÅ</span> are recalculated
                    </p>
                </div>
            </section>
            <section data-background-image="../src/content/static/santa/route-genai-gemini.png"
                     data-background-size="cover">
                <div class="floating-banner">
                    Our focus for today: Optimized Route
                    <div style="margin-top: 30px; font-size: 0.8em; line-height: 2;">
                        <p class="fragment fade-up">üéØ <span class="highlight-light">Goal: Minimize travel time!</span><span class="fragment"> ‚úÖ</span></p>
                        <p class="fragment fade-up">üì¶ <span class="highlight-light">Resources: 1 or more Santas!</span><span class="fragment"> ‚úÖ</span></p>
                        <p class="fragment fade-up">‚öñÔ∏è <span class="highlight-light">Constraints: Capacity, Time Windows</span><span class="fragment"> ‚úÖ</span></p>
                    </div>
                </div>
            </section>
        </section>

        <section>
            <section data-background-color="#3e00ff">
                <h2>Next steps</h2>
            </section>
            <section>
                <h2>These are all <br/> <span class="highlight">planning problems</span></h2>
                <p class="fragment"><span class="highlight">Optimize goals</span> with <span class="highlight">limited resources</span>
                    under <span class="highlight">constraints</span></p>
            </section>
            <section>
                <h3>üñä Model domain</h3>
                <h3 class="fragment">‚öñÔ∏è Define constraints</h3>
                <h3 class="fragment"><span class="highlight"> üöÄ Run!</span></h3>
            </section>
            <section>
                <h3>Start coding today</h3>
                <ol>
                    <li>Go to <a
                            href="https://timefold.ai/open-source-solver">https://timefold.ai/open-source-solver</a>
                    </li>
                    <li>Click <a href="https://github.com/TimefoldAI/timefold-quickstarts"><i>Run a Quickstart</i></a>.
                    </li>
                    <li>Pick a quickstart from the README.</li>
                    <li>Run it: üöÄ</li>
                </ol>
            </section>
            <section data-background-image="../src/content/static/santa/production-line-genai-gemini.png"
                     data-background-size="cover">
                <div class="floating-banner">
                    Toys need to be created
                    <p class="fragment">Quickstart: Food Packaging</p>
                </div>
            </section>
            <section data-background-image="../src/content/static/santa/schedule-genai-gemini.png"
                     data-background-size="cover">
                <div class="floating-banner">
                    Workers need to be assigned shifts
                    <p class="fragment">Quickstart: Employee Scheduling</p>
                </div>
            </section>
            <section data-background-image="../src/content/static/santa/route-genai-gemini.png"
                     data-background-size="cover">
                <div class="floating-banner">
                    Santa needs to figure out the route to all children
                    <p class="fragment">Quickstart: Vehicle Routing</p>
                </div>
            </section>
        </section>
        <section>
            <section data-background-color="#3e00ff">
                <h2>In Conclusion</h2>
            </section>
            <section>
                Solving these sorts of planning problems is hard!
            </section>
            <section>
                <h3>Algorithm comparison</h3>
                <table style="margin-top: 100px; table-layout:fixed">
                    <thead>
                    <tr>
                        <th>Greedy</th>
                        <th>Brute Force</th>
                        <th>Metaheuristics (Timefold)</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td><span class="positive">Fast</span></td>
                        <td><span class="negative">Slow</span></td>
                        <td><span class="positive">Fast</span></td>
                    </tr>
                    <tr>
                        <td><span class="positive">Scalable</span></td>
                        <td><span class="negative">Not scalable</span></td>
                        <td><span class="positive">Scalable</span></td>
                    </tr>
                    <tr>
                        <td><span class="negative">Far from optimal</span></td>
                        <td><span class="positive">Optimal</span></td>
                        <td><span class="positive">(Near) Optimal</span></td>
                    </tr>
                    </tbody>
                </table>
            </section>
            <section>
                <h3>GenAI</h3>
                <p class="fragment"><span class="highlight">Can't solve</span> these kinds of problems</p>
                <p class="fragment">but <span class="highlight">can be used</span> to write Timefold code.</p>
            </section>
            <section>Needs a stronger ending here.</section>
            <section>
                <h3><span class="highlight"> Give the üéÅ of optimization!</span></h3>
                <table class="links">
                    <tr>
                        <th>Learn more</th>
                        <td><a href="https://solver.timefold.ai">solver.timefold.ai</a></td>
                    </tr>
                    <tr>
                        <th>Get started</th>
                        <td>
                            <img src="../src/content/static/cta/docs-HelloWorld-QR-code.png"/>
                        </td>
                    </tr>
                    <tr style="font-size: 2.4rem;">
                        <th>Feedback</th>
                        <td>
                            <div >
                                <p>Add me on socials! üôè Tom Cools: (@tomcools.be)</p>
                            </div>
                        </td>
                    </tr>
                </table>
            </section>
        </section>
    </div>
</div>

<script src="../src/web/jquery/jquery.min.js"></script>
<script src="../src/web/reveal/js/reveal.js"></script>
<script src="../src/web/reveal/plugin/highlight/highlight.js"></script>
<script src="../src/web/reveal/plugin/notes/notes.js"></script>
<script src="../src/web/reveal/plugin/math/math.js"></script>

<script src="../src/content/elements/christmas-countdown.js"></script>
<script src="../src/content/elements/greedy-tree-canvas.js"></script>

<script>
    Reveal.initialize({
        center: true,
        hash: true,
        showNotes: false,
        progress: false,
        controls: false,
        // This fixes Logitech Spotlight
        keyboard: {
            37: 'prev',
            39: 'next',
        },
        plugins: [RevealHighlight, RevealNotes,RevealMath.KaTeX],
        margin: 0.05,
        minScale: 0.2,
        maxScale: 100.0
    });
</script>

</body>
</html>
